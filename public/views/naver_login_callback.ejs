<!doctype html>
<html lang="ko">
<head>
<script type="text/javascript" src="https://static.nid.naver.com/js/naverLogin_implicit-1.0.3.js" charset="utf-8"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
</head>
<body>
<script type="text/javascript">
  var naver_id_login = new naver_id_login("ZwV8tMKR9goChugNiuqV", "/");

  // 네이버 사용자 프로필 조회 이후 처리할 콜백 함수
  function naverSignInCallback() {
    const email = naver_id_login.getProfileData('email');
    // 이메일 주소값을 세션 스토리지에 저장
    alert(naver_id_login.getProfileData('email'));
    alert(naver_id_login.getProfileData('nickname'));
    alert(naver_id_login.getProfileData('age'));
    sessionStorage.setItem("naver_email", email);
    // 기타 처리 작업
    // ...
    
  }

  if (location.hash) {
    const hashParams = new URLSearchParams(location.hash.slice(1));
    const access_token = hashParams.get("access_token");

    // 액세스 토큰을 세션 스토리지에 저장
    sessionStorage.setItem("naver_access_token", access_token);

    // 네이버 사용자 프로필 조회
    naver_id_login.get_naver_userprofile(function(){
      // 프로필 조회가 완료되면 콜백 함수를 호출하여 이메일 주소값을 저장
      naverSignInCallback();
    });

    // 콜백 URL에서 메인 페이지로 리다이렉트
    location.replace("/");
  }
</script>
</body>
</html>

