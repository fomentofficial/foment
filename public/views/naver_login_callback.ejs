<!doctype html>
<html lang="ko">
  <head>
    <%- include('./partials/head.ejs') %>
  </head>
  <body>
    <script type="text/javascript">
        // 네이버 로그인 객체 생성
        var naver_id_login = new naver_id_login();

        // 접근 토큰 값 출력
        console.log(naver_id_login.oauthParams.access_token);

        // 네이버 사용자 프로필 조회
        naver_id_login.get_naver_userprofile("naverSignInCallback()");

        // 네이버 사용자 프로필 조회 이후 프로필 정보를 처리할 callback function
        function naverSignInCallback() {
          const email = naver_id_login.getProfileData('email');
          const access_token = naver_id_login.oauthParams.access_token;

          // 이메일과 액세스 토큰을 세션 스토리지에 저장
          sessionStorage.setItem("naver_email", email);
          sessionStorage.setItem("naver_access_token", access_token);

          console.log(email);

          // 리다이렉트
          window.location.href = "/";
        }
    </script>
  </body>
</html>
